@inject Forum3.Services.ContextUserFactory ContextUserFactory

@{ 
	var contextUser = ContextUserFactory.GetContextUser();

	if (string.IsNullOrEmpty(ViewData["LogoPath"] as string)) {
		ViewData["LogoPath"] = "/images/logos/Logo.png";
	}
}

	<div id="page-title" class="align-center"><a href="/"><img src=@ViewData["LogoPath"] alt="Warpstorm" /></a></div>

	<nav>
		<ul class="float-right inline">
			@if (contextUser.IsAuthenticated) {
				<li class="open-menu">
					<span class="small-button pointer">@contextUser.ApplicationUser.DisplayName</span>
					<div class="drop-down-menu-wrapper hidden">
						<ul class="drop-down-menu content-box">
							<li clickable-link-parent><a asp-controller="@nameof(Profile)" asp-action="@nameof(Profile.Details)">Profile</a></li>
							<li><a href="javascript:document.getElementById('logoutForm').submit()" onclick="return confirm('Are you sure you want to logout?');">Log off</a></li>
						</ul>
					</div>
				</li>

				<li><a asp-controller="@nameof(Boards)" asp-action="@nameof(Boards.Index)" class="small-button">Boards</a></li>
				<li><a asp-controller="@nameof(Topics)" asp-action="@nameof(Topics.Index)" class="small-button">Topics</a></li>

				@if (contextUser.IsAdmin) {
					<li class="open-menu">
						<span class="small-button pointer">Admin</span>
						<div class="drop-down-menu-wrapper hidden">
							<ul class="drop-down-menu content-box">
								<li clickable-link-parent><a asp-controller="@nameof(Boards)" asp-action="@nameof(Boards.Manage)">Boards</a></li>
								<li clickable-link-parent><a asp-controller="@nameof(Roles)" asp-action="@nameof(Roles.Index)">Roles</a></li>
								<li clickable-link-parent><a asp-controller="@nameof(Smileys)" asp-action="@nameof(Smileys.Index)">Smileys</a></li>
								<li clickable-link-parent><a asp-controller="@nameof(SiteSettings)" asp-action="@nameof(SiteSettings.Index)">Settings</a></li>
								<li>Users</li>
							</ul>
						</div>
					</li>
				}
			}
			else {
				<li><a class="small-button" asp-action="@nameof(Account.Register)" asp-controller="@nameof(Account)">Register</a></li>
				<li><a class="small-button" asp-action="@nameof(Account.Login)" asp-controller="@nameof(Account)">Log in</a></li>
			}
		</ul>
		
		<br class="clear" />
	</nav>

<form asp-area="" asp-controller="@nameof(Account)" asp-action="@nameof(Account.Logout)" method="post" id="logoutForm" class="navbar-right"></form>